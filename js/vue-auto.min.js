vm = new Vue({
    el: "#app",
    data: {
        isActivities: false,
        isPrivacy: false,
        token: "",
        phone: "",
        phoneType: -1,
        codeValue: "",
        codeTime: 60,
        isOverdue: true,
        isGetCode: false,
        operate: "order-result-success",
        // showDialog: false,
        // operateResult: "",
        showResultDialog: false,
        orderSuc: false,
        // priceMsg: "",
        // centerMsg: "",
        showMsg: "",
        selectType: 0,
        isFixed: false,
        showPriPolicy: 1,
    },
    watch: {
        //完成手机号输入自动否选协议并请求验证码
        phone: function(val) {
            if (val && val.length >= 11) {
                let isphone = isPhoneNo(val);
                if (isphone) {
                    getVue().selectType = 1;
                    requestCode();
                }  
            }
        }
    },
    // computed: {
    //     phoneFormat: function() {
    //         let phone = this.phone;
    //         if (phone && phone.length >= 11) {
    //             let start = phone.substring(0, 3);
    //             let end = phone.substring(7, 11);
    //             return `${start}XXXX ${end}`
    //         } else if (localStorage.phone && localStorage.phone.length >= 11) {
    //             let oldPhone = localStorage.phone;
    //             let start = oldPhone.substring(0, 3);
    //             let end = oldPhone.substring(7, 11);
    //             return `${start}XXXX ${end}`
    //         }
    //         return ""
    //     },
    //     phonesFormat() {
    //         return function(fun) {
    //             if (typeof fun === "function") {
    //                 return fun()
    //             } else {
    //                 let phone = this.phone;
    //                 if (phone && phone.length >= 11) {
    //                     let start = phone.substring(0, 3);
    //                     let end = phone.substring(7, 11);
    //                     return `${start}XXXX ${end}`
    //                 } else if (localStorage.phone && localStorage.phone.length >= 11) {
    //                     let oldPhone = localStorage.phone;
    //                     let start = oldPhone.substring(0, 3);
    //                     let end = oldPhone.substring(7, 11);
    //                     return `${start}XXXX ${end}`
    //                 }
    //                 return ""
    //             }
    //         }
    //     },
    //     objFormat() {
    //         return function(fun) {
    //             if (typeof fun === "function") {
    //                 return fun()
    //             }
    //         }
    //     }
    // },
    mounted: function() {
        this.screenHeight = window.screen.height;
        // Api.behaviorEntry(BEHAVIOUR.CODE_1002);
        // isLogin(this);
        // pageInit(this)
    },
    methods: {
        clickGetCode: function() {
            // PAGE_CLICK.orderGetCode(this)
            CLICK_ACTION.orderGetCode(this)
        },
        clickCheckCode: function() {
            CLICK_ACTION.orderCheckCode(this)
        },
        clickQuitLogin: function() {
            quitLogin(this)
        },
        clickListItem: function(item, index) {
            this.listType = 2;
            this.playIndex = index;
            autoSetVideo(this, item);
            PAGE_CLICK.listItemClick(this)
        },
        clickSelectType: function() {
            if (this.selectType === 1) {
                this.selectType = 0
            } else {
                this.selectType = 1
            }
        },
        clickActivities: function() {
            this.toOtherPage("Activities.html")
        },
        clickPrivacy: function() {
            this.toOtherPage("Privacy.html")
        },
        toOtherPage: function(url) {
            window.location.href = url
        },

        clickCloseResultDialog: function() {
            this.showResultDialog = false;
            this.orderSuc = false;
            this.isOverdue = true;
            clearTimeout(clock);
            this.codeTime = 60;
        },
        clickDoAction: function(fun) {
            if (typeof fun === "function") {
                fun()
            }
        }
    }
});
function vueAutoSet(key, value) {
    if (key && key.length > 0) {
        Vue.set(vm.datas, key, value)
    }
}
